from usb_iss import UsbIss, defs

# Configure I2C mode

iss = UsbIss()
iss.open("/dev/ttyACM2")
iss.setup_i2c()

# Write and read back some data
# NOTE: I2C methods use 7-bit device addresses (0x00 - 0x7F)

####Write to Arduino slave on 0x40
#iss.i2c.write(0x40,0x00, [0x00,0x34,0x22,0x21,0x45,0x2E,0xE0,0xE2, 0xF1,0x22,0x23,0x34,0x56,0x11,0x21,0x1C,0x1D>
iss.i2c.write(0x40, 0x00, [0x10,0x10])


#### Write to iyho device - Getnodeid 
#iss.i2c.write(0x41, 0x80, [0x90, 0xE0, 0x04, 0x00, 0x89])

# Serial number:
#iss.i2c.write(0x41, 0x80, [0x90, 0xE1, 0x04, 0x00, 0x89])


# Query status format
#iss.i2c.write(0x41, 0x80, [0xC2, 0x20, 0x04, 0x00, 0x18])


####
#data = iss.i2c.read_ad0(0x40,25)


####Write to arduino slave on 0x40 - NOT WORKING
#iss.i2c.direct([defs.I2CDirect.START, defs.I2CDirect.WRITE2, 0x40, 0x00, 0x00, 0x30]);

####Test connection to device
#Itho device address: 0x41
#Arduino slave address: 0x40
#data=iss.i2c.test(0x40)
